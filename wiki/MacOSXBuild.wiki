#summary This page explains how to build Tamanoir on MacOS X.
#labels Phase-Requirements,Phase-Implementation

= Introduction =

This page explains how to build Tamanoir on Mac OS X.


= Details =

Building Tamanoir on Mac OS X.

You need :
- OpenCV : to load/save images, to manipulate some image buffers (libs cxcore, highgui)
- Qt4 for Mac
- XCode
- Tamanoir

If you want to manipulate 16bit TIFF, you have to patch OpenCV and to use libtiff. 
If OpenCV uses ImageIO, it will not support import/export of 16bit images. When removing ImageIO from OpenCV, you need to add at least libPNG to open PNG pictures. The building of libJPEG is not needed.

So, for 16bit support, you need to download and rebuild : 
* libTIFF
* libPNG
* OpenCV 

If you do not need 16bit TIFF support, jump to Qt4 section.

----
==Libtiff==

Download : http://www.libtiff.org/
Compile and Install :
{{{
./configure ; make ; sudo make install
}}}

----
==libpng==

Download : [http://libpng.sourceforge.net/] - [ftp://ftp.simplesystems.org/pub/png/]
Compile and Install :
./configure ; make ; sudo make install

----
== OpenCV ==

=== OpenCV *without* 16bit TIFF support ===

Install a development version of OpenCV with Fink or MacPorts
{{{
sudo port install opencv
}}}
or
{{{
sudo fink install opencv
}}}

Project page: [http://www.intel.com/technology/computing/opencv/]


=== OpenCV *with* 16bit TIFF support ===
Download patched version for 16bit support : [http://cseyve.free.fr/Vision/download/opencv-tiff16bit.tar.bz2]

We must compile without ImageIO to use the libtiff for 16bit support :
{{{
./configure --with-libtiff=yes --enable-libtiff=yes --with-imageio=no
}}}
We must obtain this kind of configuration :
{{{
Image I/O Use ImageIO / Mac OS X: no
Use libjpeg: yes
Use zlib: yes
Use libpng: yes
Use libtiff: yes
Use libjasper: no
Use libIlmImf: no
}}}


Or with MacPorts paths: 
{{{
CPATH="/opt/local/include" LIBRARY_PATH="/opt/local/lib" ./configure --with-libtiff=yes --enable-libtiff=yes --with-imageio=no
}}}

For this configuration on a G5 :
{{{
General configuration ================================================
    Compiler:                 g++
    CXXFLAGS:                 -Wall -fno-rtti -pipe -O3 -g -mcpu=G3 -mtune=G5 -fomit-frame-pointer 

    Install path:             /usr/local

HighGUI configuration ================================================

    Windowing system --------------
    Use Carbon / Mac OS X:    yes
    Use gtk+ 2.x:             no
    Use gthread:              no

    Image I/O ---------------------
    Use ImageIO / Mac OS X:   no
    Use libjpeg:              yes
    Use zlib:                 yes
    Use libpng:               yes
    Use libtiff:              yes
    Use libjasper:            yes
    Use libIlmImf:            no

    Video I/O ---------------------
    Use QuickTime / Mac OS X: yes
    Use xine:                 no
    Use ffmpeg:               no
    Use dc1394 & raw1394:     no
    Use v4l:                  no
    Use v4l2:                 no

Wrappers for other languages =========================================
    SWIG                      
    Python                    yes

Additional build settings ============================================
    Build demo apps           yes
}}}

----
== Qt4 ==

Download : [http://trolltech.com/downloads/opensource]
Install Qt4.

----
== Tamanoir ==

Download snapshot : 
{{{
# Non-members may check out a read-only working copy anonymously over HTTP.
svn checkout http://tamanoir.googlecode.com/svn/trunk/ tamanoir-read-only
}}}


Compile Tamanoir :
{{{
cd Tamanoir/
/Developer/Tools/Qt/qmake
}}}

Then open the _Tamanoir.xcodeproj_ with XCode then build&run.


----
== Building packages ==

Reference : http://www.siteduzero.com/forum-83-234070-p1-un-bundle-mac-pour-vos-applications-qt4.html

Required : Python : http://www.python.org/download/




